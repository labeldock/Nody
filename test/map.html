<!DOCTYPE html>
<html>
    <head>
        <title>Hello Map</title>
        
        <!-- Scripts go here -->
		<script src="../js/nody.js"></script>
		<script src="resources/js/jquery-1.11.1.min.js"></script>
        <script src="../mixed-module/mixed/ol.js"></script>
        <!-- Styles go here -->
        <link rel="stylesheet" href="../mixed-module/mixed/ol.css">
		<style>
		#map1 {
			width:400px;
			height:400px;
		}
		#map2 {
			width:400px;
			height:400px;
		}
		</style>
    </head>
    
    <body>
		<h3>hello map</h3>
        <div id='map1'></div>
		<div id='map2'></div>
		
		<script>
		
		makeModule("OpenLayers",{
			helloworld:function(){
				var newLayer = new ol.layer.Tile({
				    source: new ol.source.OSM(),
					extend:false
				});
				this.Map.addLayer(newLayer);
			}
		},function( target ){
			this.Source   = target;
			this.SourceID = ELUNIQUEID(target);
			this.Map = new ol.Map({
		        target: this.SourceID,
		        renderer:'canvas',
		    	view: new ol.View({
		    		projection: 'EPSG:900913',
		    		center:[0,0],
		    		zoom:5
		    	})
		    });
		});
		
		(new OpenLayers("#map1")).helloworld();
		
		makeModule("ImageLayer",{
			
		},function(targetNode,imageSrc,width,height){
			this.Source   = ZFIND(targetNode);
			this.SourceID = ELUNIQUEID(this.Source);
			
			this.SourceExtent = [0, 0, width, height];
			this.SourceProjection = new ol.proj.Projection({
	           code   : 'pixel',
	           units  : 'pixels',
	           extent : this.SourceExtent
	        });
			this.SourceCenter = ol.extent.getCenter(this.SourceProjection.getExtent());
			
			this.Map = new ol.Map({
				target: this.SourceID,
				renderer: 'canvas',
				controls:[],
				logo: false,
				layers: [],
		        view: new ol.View({
		            projection: this.SourceProjection,
		            extent: this.SourceProjection.getExtent(),
		            center: this.SourceCenter,
		            zoom: 1,
		            maxZoom: 3,
		            minZoom: 1
		        })
		    });
			
			this.Map.addLayer(new ol.layer.Image({
						source:new ol.source.ImageStatic({
							url: imageSrc,
							imageSize:[this.SourceExtent[2],this.SourceExtent[3]],
							imageExtent:this.SourceExtent,
							projection:this.SourceProjection,
							extent:this.SourceProjection.getExtent()
						})	
					})
			);
			
		});
		
		(new ImageLayer("#map2","resources/images/zoom/world.gif",800,465));
		
		</script>
    </body>
</html>