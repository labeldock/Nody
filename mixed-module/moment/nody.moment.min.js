!function(){makeModule("MixedMoment",{getCommand:function(t){var a=CLONEARRAY(arguments);return a.shift(),this.Source[t].apply(this.Source,a)},setCommand:function(t){var a=CLONEARRAY(arguments);return a.shift(),this.Source[t].apply(this.Source,a),this},format:function(){return this.Source.format.apply(this.Source,CLONEARRAY(arguments))},clone:function(){var t=new MixedMoment(this.Source);return t.CalendarStartDay=this.CalendarStartDay,t},"var!calendarToggle":function(t,a,e){console.log("toogle",t,a,e)},setDrawStartDay:function(t){return"number"==typeof t&&(this.CalendarStartDay=t),this},drawCalendarHeaderRow:function(t){var a=this.Source.clone(),e=this.CalendarStartDay;return MAKE("tr",TIMESMAP(7,function(r){var n=TURNINDEX(r+e,7);return"function"==typeof t?t(MAKE("td",{html:a.day(n).format("dddd")})):MAKE("td",{html:a.day(n).format("dddd")})}))},drawCalendarBodyRows:function(){for(var t=this,a=this.Source.clone().date(1),e=a.year(),r=a.month()+1,n=a.clone().add(1,"months").date(0),o=TURNINDEX(a.day()-this.CalendarStartDay,7),i=a.clone().date(0).date()-o,d=ARRAYINARRAY(6),l=_Template(TAG("td.before[partial-value=html]"),!1),s=0,u=o;u>s;s++)d[0].push(l.generate({html:i+s+1}));for(var h=n.date()+o,m=_Template(TAG("td[partial-value=html][partial-dataset=dataset]"),!1),s=o,u=h;u>s;s++){var c=s-o+1,f=m.generate({html:c,dataset:{year:e,month:r,date:c}});d[Math.floor(s/7)].push(f),ELON(f,"click",function(){t.calendarToggle(parseInt(ELDATA(this,"year")),parseInt(ELDATA(this,"month")),parseInt(ELDATA(this,"date")))})}for(var A=_Template(TAG("td.after[partial-value=html]"),!1),s=h,u=42,p=1;u>s;s++)d[Math.floor(s/7)].push(A.generate({html:p})),p++;return DATAMAP(d,function(t){return MAKE("tr",t)})}},function(t,a,e,r){this.CalendarStartDay=0,this.Source=1==arguments.length&&"string"==typeof t&&2==t.length?moment(void 0,void 0,t):"string"==typeof t&&"string"==typeof a&&2==a.length?moment(t,void 0,a):moment.apply(void 0,CLONEARRAY(arguments))});var t=FUT.LOADINGSCRIPTROOT();FUT.INCLUDE(t+"moment-with-locales.js")}();